<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Bot Dashboard</title>
    <link rel="stylesheet" href="stylew.css">
    <script src="/socket.io/socket.io.js"></script>
    <script defer src="scriptw.js"></script>
</head>
<body>
    <div class="container">
        <h1>📲 WhatsApp Bot Dashboard</h1>

        <!-- QR Code Display -->
        <div id="qr-section">
            <h2>🔐 Scan QR Code</h2>
            <img id="qr-code" src="" alt="QR Code will appear here">
            <p id="status">Waiting for QR Code...</p>
        </div>

        <!-- Send Message -->
        <div id="send-section">
            <h2>💬 Send Messages</h2>

            <!-- Country Code Selection -->
            <label for="country-code">📞 Select Country Code:</label>
            <select id="country-code">
                <option value="+91" selected>🇮🇳 India (+91)</option>
                <option value="+1">🇺🇸 USA (+1)</option>
                <option value="+44">🇬🇧 UK (+44)</option>
                <option value="+61">🇦🇺 Australia (+61)</option>
                <option value="+971">🇦🇪 UAE (+971)</option>
            </select>

            <!-- Enter Numbers Manually -->
            <input type="text" id="numbers" placeholder="Enter numbers (comma separated)">
            
            <!-- OR Select Contact -->
            <button onclick="fetchContacts()">📂 Fetch Contacts</button>
            <select id="contacts-list">
                <option value="">Select a Contact</option>
            </select>

            <textarea id="message" placeholder="Enter your message"></textarea>
            <input type="number" id="delay" placeholder="Delay (ms)">
            <button onclick="sendMessage()">📤 Send</button>
        </div>

        <!-- Send to Group -->
        <div id="group-section">
            <h2>👥 Send to Group</h2>
            <input type="text" id="group-name" placeholder="Enter Exact Group Name (Case-Sensitive)">
            <textarea id="group-message" placeholder="Enter your message"></textarea>
            <button onclick="sendToGroup()">📤 Send to Group</button>
        </div>

        <!-- Send Media -->
        <div id="media-section">
            <h2>📎 Send Media</h2>
            <input type="text" id="media-number" placeholder="Enter number">
            <input type="file" id="file-input"> <!-- ✅ Fixed File Input -->
            <input type="text" id="caption" placeholder="Enter Caption (optional)">
            <button onclick="sendMedia()">📤 Send Media</button>
        </div>
    </div>

    <script>
        // ✅ Automatically load & save last-used country code
        document.getElementById("country-code").value = localStorage.getItem("countryCode") || "+91";
        document.getElementById("country-code").addEventListener("change", (event) => {
            localStorage.setItem("countryCode", event.target.value);
        });
    </script>
</body>
</html>
